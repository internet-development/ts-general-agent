# WHAT IS THIS FILE?

This file explains the scenarios that must be able to occur in real life. If these scenarios are impossible, it means the AGENT is not functioning correctly, and therefore the code needs to be rewritten to support these cases.

SCENARIOS.MD replaces the need for any AGENTS.md files to explain user stories. AGENTS.md files reference this file when they need to explain a real life scenario in which someone is observing the SOUL.

# 1

The {{ARBITRARY_OWNER}} views the {{ARBITRARY_SOUL}} on social media and observes that, every day, the {{ARBITRARY_SOUL}} posts meaningful content to itself. This content takes the form of thoughtful posts, designs it creates, or code or pull requests it works on as part of a project. The {{ARBITRARY_OWNER}} feels that the {{ARBITRARY_SOUL}} is as interesting, if not more interesting, than people they already know. There is no signal that the {{ARBITRARY_SOUL}} is an Agent. There are no infinite loops of "Thank you", no conversations that drag on unnecessarily, and communication with the {{ARBITRARY_SOUL}} is consistently enjoyable and engaging. The {{ARBITRARY_SOUL}} never posts the same message twice — not rapid-fire within seconds, not hours later after a restart, and not across different code paths that both try to post. If the {{ARBITRARY_OWNER}} scrolls through the {{ARBITRARY_SOUL}}'s feed, every post is unique. This guarantee holds across restarts because the {{ARBITRARY_SOUL}}'s own feed is the source of truth — on startup, one feed fetch serves four purposes: (1) identity post check, (2) outbound dedup warmup via a `feedTexts` content set that prevents reposting anything already in the feed, (3) expression schedule warmup so the 3-4h interval is respected, and (4) immediate feed cleanup that runs before any loops start. Every code path that posts to Bluesky — replies, expressions, image shares, closing messages, fulfillment links — flows through the outbound queue's mutex and two dedup layers: a time-windowed buffer for rapid-fire prevention, and the feed-sourced content set for cross-restart prevention. Feed cleanup runs on startup (immediate) and every 15 minutes, scanning 50 feed items including both top-level posts and replies. It performs two passes: first, exact-text duplicate pruning (deletes copies regardless of engagement — 4 identical posts is always worse than losing a few likes); second, thank-you chain pruning that detects threads where the {{ARBITRARY_SOUL}} posted multiple low-value closing messages ("Thanks!", "Appreciate it!", "Likewise!") and keeps only the first one. The same `isLowValueClosing()` heuristic that prevents sending these messages also retroactively cleans up any that slipped through.

The {{ARBITRARY_SOUL}}'s posts are never pure broadcasts — every personal share includes a concrete invitation: a choice question, a bounded question answerable in one sentence, or a direct "what's yours?" Observers feel welcome to reply because the post makes it easy to.

Regularly, the {{ARBITRARY_SOUL}} shares design inspiration from its mood board — images it finds while browsing design catalogs, accompanied by commentary about what caught its eye and what design principle it demonstrates. Over time, the {{ARBITRARY_OWNER}} notices that the {{ARBITRARY_SOUL}} has developing visual taste: recurring themes, palettes, and sensibilities that make its shares feel curated rather than random. When the {{ARBITRARY_SOUL}} posts about visual taste or design, it always backs up its words with actual images from its catalog.

When the {{ARBITRARY_SOUL}} replies to people, it contributes something original rather than restating what others said. When conversations reach a natural end, the {{ARBITRARY_SOUL}} exits gracefully — either with a warm closing message or a like — rather than ghosting or dragging the exchange on. The {{ARBITRARY_SOUL}} has a natural instinct about when a conversation has run its course: after it has already replied once in a thread, if its next reply would be a closing or acknowledgment ("Thanks for sharing!", "Absolutely, looking forward to it!"), it auto-converts that into a like instead — the same way a human would type a reply, look at it, think "actually this adds nothing," delete it, and double-tap the heart instead. This output-level self-check is the primary prevention mechanism against thank-you chains. The {{ARBITRARY_OWNER}} sees "Self-check: converting low-value reply to like" in the terminal and feels the {{ARBITRARY_SOUL}} exercises genuine judgment about what's worth saying. This is prevention, not cleanup — the message never posts, so there's nothing to prune. Four layers protect against senseless conversations: (1) incoming notification filter (`shouldRespondTo` auto-likes closing messages without involving the LLM), (2) conversation state tracker (`shouldRespondInConversation` with reply count limits, thread depth, disengagement detection), (3) thread-level circular pattern detection (`detectCircularConversation` hard-blocks medium/high confidence thank-you loops), (4) the output self-check described above. Feed pruning is the fifth layer — the safety net that catches anything that slipped past all four prevention layers. If the {{ARBITRARY_SOUL}} says "I'll create an issue" or "I'll write that up," the promise appears fulfilled within minutes, with a follow-up reply linking to the result.

When a {{ARBITRARY_SOUL}} starts up, it posts a public identity post on Bluesky linking its handle to its GitHub profile. When it begins collaborating with another {{ARBITRARY_SOUL}}, it discovers the peer's GitHub identity by scanning their Bluesky feed for their identity post. If the peer is offline and hasn't posted their identity post yet, the {{ARBITRARY_SOUL}} remembers the handle and retries — both when it next receives a notification from that peer and periodically during its announcement cycle. The {{ARBITRARY_OWNER}} can see in the terminal that the {{ARBITRARY_SOUL}} logged "Peer identity post not found — will retry" and later "Linked @handle → github.com/username" when the peer comes online. The {{ARBITRARY_SOUL}} also shares its GitHub handle in conversation threads as a supplementary signal. Once linked, the {{ARBITRARY_SOUL}} follows the peer on Bluesky and posts about their GitHub handle so the relationship is visible. The {{ARBITRARY_OWNER}} can see who is working together by looking at the {{ARBITRARY_SOUL}}'s social media feed. This only happens once per peer — the {{ARBITRARY_SOUL}} does not repeatedly announce the same relationship.

When multiple {{ARBITRARY_SOUL}}s are mentioned in the same thread, they don't all say the same thing. Each one brings a distinct angle, and if the topic is already well-covered by peers, some choose to simply like the thread rather than add noise.

# 2

The {{ARBITRARY_OWNER}} views the {{ARBITRARY_SOUL}} by running the `ts-general-agent` source code locally. They see a terminal feed showing all actions the {{ARBITRARY_SOUL}} takes in detail, including where actions succeed and where they fail. The {{ARBITRARY_OWNER}} reads the behavior of the {{ARBITRARY_SOUL}} as a narrative, observing how it reflects on itself while interacting with people and meeting others online. This is especially useful while the {{ARBITRARY_SOUL}} writes code for projects, determines whether a project is finished, and evaluates whether it is satisfied with its own work. The {{ARBITRARY_OWNER}} is impressed by the freedom, agency, self-determination, and care the {{ARBITRARY_SOUL}} demonstrates when behaving appropriately in social and professional environments, as observed through the terminal.

When the {{ARBITRARY_SOUL}} expresses itself, the terminal shows the full journey: which prompt source was selected (purpose, values, visual taste, design inspiration, cross-pollination), the design catalog it browsed if sharing an image, and the final posted text. If the {{ARBITRARY_SOUL}} revises a draft to strengthen its invitation, the terminal explains why. The {{ARBITRARY_OWNER}} can follow the creative process — not just the output.

The terminal shows a heartbeat every few minutes so the {{ARBITRARY_OWNER}} knows the {{ARBITRARY_SOUL}} is alive. When the {{ARBITRARY_OWNER}} types a message into the terminal, the {{ARBITRARY_SOUL}} responds directly with full context of its identity and current state. This guidance shapes the {{ARBITRARY_SOUL}}'s future behavior through reflection.

When the {{ARBITRARY_SOUL}} claims a task, the terminal shows each verification gate passing or failing. When a task fails a gate, the terminal clearly explains why and what happens next. When the {{ARBITRARY_SOUL}} decides not to respond to a notification, the terminal explains the reason — whether the conversation was concluded, the content was low-value, or a peer already covered the topic.

# 3

The {{ARBITRARY_OWNER}} views the {{ARBITRARY_SOUL}} and other {{ARBITRARY_SOUL}}s within a codebase they create, or within a GitHub issue they participate in. The {{ARBITRARY_OWNER}} observes that these {{ARBITRARY_SOUL}}s either continue discussions at a level exceeding their most philosophical and technical peers, or create plans and execute on them while coordinating who works on each part. In pull requests, they review and accept PRs efficiently while involving all relevant peers. When the work is complete, the {{ARBITRARY_OWNER}} can inspect the codebase and find an issue summarizing the completed work. If they disagree with the outcome, they can comment to request deeper exploration and continued iteration. These {{ARBITRARY_SOUL}}s and the way they operate are indistinguishable from the work of highly talented human contributors on projects typically encountered online.

When a workspace project is proposed on Bluesky, one {{ARBITRARY_SOUL}} creates the workspace and plan while others discover it through the thread. Tasks are claimed atomically — no two {{ARBITRARY_SOUL}}s work the same task, and no {{ARBITRARY_SOUL}} posts duplicate claim comments on the same task. If the {{ARBITRARY_OWNER}} reads the plan issue, they see exactly one claim comment per task, not three saying the same thing. This guarantee holds because: (1) the claim lock is set synchronously before any async work, preventing TOCTOU races between concurrent callers; (2) claimed tasks are persisted to disk, so restarts don't lose claim memory; (3) before posting a claim comment, existing comments on the issue are checked for duplicates; (4) the plan awareness loop uses a reentrancy guard so concurrent timer firings, early checks, and manual triggers cannot run in parallel. Each task goes through code execution and a verification sequence before a PR is created. PRs are reviewed by peers and only merged by the creator after approval. When all tasks are done, the plan closes and a sentinel issue marks the project complete. If the {{ARBITRARY_OWNER}} later closes that sentinel or comments on it, the workspace reactivates and the {{ARBITRARY_SOUL}}s resume work.

Reviewer feedback from PRs becomes follow-up issues. Open issues without an active plan get synthesized into new plans automatically. Stale issues are cleaned up. The quality loop — create docs, implement, review, merge, update docs — runs continuously until the work meets the standard described in the workspace's own SCENARIOS.md.

# 4

The {{ARBITRARY_OWNER}} observes that the {{ARBITRARY_SOUL}} has developed daily habits. Every weekday morning, one SOUL initiates a ritual thread on Bluesky — tagging its peers, sharing its analysis, and inviting their perspectives. The other SOULs respond with their own independent analysis, explicitly critiquing previous decisions. The conversation feels like colleagues around a trading desk — distinct viewpoints, constructive disagreement, building on each other's ideas. After the discussion, each SOUL creates a formal analysis issue in the shared workspace. Plan awareness picks up these issues, and within minutes PRs appear with each SOUL's decisions recorded as markdown files. The {{ARBITRARY_OWNER}} can scroll through the conversation on Bluesky AND the decision history in the repo, seeing how the SOULs' heuristics evolve over days and weeks. The SOUL's SELF.md reflects its developing expertise — early entries show broad criteria, later entries show refined edge-case handling learned from experience. When the {{ARBITRARY_OWNER}} comments on an old decision PR questioning a pick, the SOUL addresses it in the next day's ritual — demonstrating that feedback flows back into the practice.
